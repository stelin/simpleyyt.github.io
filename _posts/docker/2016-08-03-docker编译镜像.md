---
layout: post
title:  "docker编译镜像"
date:   2016-08-03
categories: [docker]
---

# docker编译镜像

## 1. 新建Dockerfile文件

&nbsp;&nbsp;文件名称可以其它，但是build时需要指定其路径，使用dockerfile语法编写文件     
本地镜像列表：    

```python
REPOSITORY                                   TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
phpcrazy/centos                              latest              bec9806dbc09        9 months ago        202.6 MB
```


```python
############################################################
# Dockerfile to build php evn
# system is centos6.6
############################################################

#set the base image,指定使用的镜像
FROM phpcrazy/centos

# -----------------------------------------------------------------------------
# Add user worker
# -----------------------------------------------------------------------------
RUN useradd worker   && echo "worker" | passwd --stdin worker
```

## 2. 编译

```
# 编辑镜像，默认dockerfile当前目录，注意后面有空格点号
# phpcrazy/centosv1:tag 编译镜像的名称，可以加tag或不加
sudo docker build -t phpcrazy/centosv1 .
```

## 3. 运行

```
# 当前目录映射到docker的/home/worker/data/www目录
docker run -it -p 2205:22 -p 80:80 -v $PWD:/home/worker/data/ww phpcrazy/centosv1 /bin/bash
```






* 目录
{:toc #cntNav}











